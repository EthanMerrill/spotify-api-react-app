(this["webpackJsonpspotify-api-react-app"]=this["webpackJsonpspotify-api-react-app"]||[]).push([[0],{194:function(t,e,n){},195:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(35),s=n.n(c),o=(n(194),n(195),n(9)),r=n(16),l=n(60),d=n(273),u=n(272),j=n(2),h=function(t){var e=t.data,n=t.trackAttribute,i=t.setSongIdOrder,c=Object(a.useState)(null),s=Object(o.a)(c,2),h=s[0],b=s[1],p=Object(a.useState)(null),f=Object(o.a)(p,2),v=f[0],O=f[1],x=Object(a.useState)("None"),m=Object(o.a)(x,2),y=m[0],g=m[1],F=Object(a.useState)({max:0,min:0,avg:0}),k=Object(o.a)(F,2),S=k[0],w=k[1],A=40,N=e?35*(null===e||void 0===e?void 0:e.length)+A:0;Object(a.useEffect)((function(){null!==e&&w({max:Math.max.apply(Math,null===e||void 0===e?void 0:e.map((function(t){return t[n]}))),min:Math.min.apply(Math,null===e||void 0===e?void 0:e.map((function(t){return t[n]}))),avg:(null===e||void 0===e?void 0:e.reduce((function(t,e){return t+e[n]}),0))/(null===e||void 0===e?void 0:e.length)})}),[e,n]),Object(a.useEffect)((function(){if(null!==e)switch(y){case"Ascending":b(Object(r.a)(e).sort((function(t,e){return e[n]-t[n]})));break;case"Descending":b(Object(r.a)(e).sort((function(t,e){return t[n]-e[n]})));break;case"Peak":var t=Object(r.a)(e).sort((function(t,e){return e[n]-t[n]})),a=t.filter((function(t,e){return e%2===0})),i=t.filter((function(t,e){return e%2!==0})),c=a.sort((function(t,e){return t[n]-e[n]})),s=i.sort((function(t,e){return e[n]-t[n]}));b(c.concat(s));break;case"None":default:b(e)}else O(null)}),[y,n,e]),Object(a.useEffect)((function(){if("undefined"!==typeof h){var t=l.b().domain(l.a(null===e||void 0===e?void 0:e.length)).range([0,N-A]).padding(.05),a=l.c().domain([0,S.max]).range([0,100]);i(null===h||void 0===h?void 0:h.map((function(t){return"spotify:track:".concat(t.id)})));var c=null===h||void 0===h?void 0:h.map((function(e){return{trackName:null===e||void 0===e?void 0:e.name,x:50,y:t(null===h||void 0===h?void 0:h.indexOf(e)),width:a(e[n]),height:30}}));O(c)}}),[e,N,n,S,y,h,i]);return Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("div",{className:"sort-controls",children:Object(j.jsxs)(u.a,{color:"primary",value:y,exclusive:!0,onChange:function(t,e){g(e)},children:[Object(j.jsx)(d.a,{value:"None",children:"None"}),Object(j.jsx)(d.a,{value:"Ascending",children:"Ascending"}),Object(j.jsx)(d.a,{value:"Descending",children:"Descending"}),Object(j.jsx)(d.a,{value:"Peak",children:"Peak"})]})}),Object(j.jsx)("div",{className:"playlist-stats card",children:e&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h3",{children:["Min ",n,": ",S.min.toFixed(2)]}),Object(j.jsxs)("h3",{children:["Max ",n,": ",S.max.toFixed(2)]}),Object(j.jsxs)("h3",{children:["Average ",n,": ",S.avg.toFixed(2)]})]})}),Object(j.jsx)("div",{id:"chart",children:Object(j.jsxs)("svg",{id:"songChart",height:N,width:800,children:[Object(j.jsx)("text",{x:50,y:15,style:{fill:"#FFFFFF"},children:n}),Object(j.jsx)("text",{x:v?Math.max.apply(Math,v.map((function(t){return t.width+50})))+8:20,y:15,style:{fill:"#FFFFFF"},children:"Songs"}),Object(j.jsx)("line",{x1:0,x2:800,y1:25,y2:25,stroke:"white",strokeWidth:".1"}),e&&v&&(null===v||void 0===v?void 0:v.map((function(t){return Object(j.jsxs)("g",{children:[Object(j.jsxs)("text",{x:t.x+110,y:t.y+20+A,style:{fill:"#FFFFFF"},children:[null===t||void 0===t?void 0:t.trackName," "]}),Object(j.jsx)("rect",{x:t.x,y:t.y+A,width:t.width,height:t.height,style:{fill:"#1DB954",rx:"4px"}})]},t.y)}))),e&&v&&Object(j.jsxs)("g",{children:[Object(j.jsx)("line",{x1:Math.max.apply(Math,v.map((function(t){return t.width+50}))),y1:A,x2:Math.max.apply(Math,v.map((function(t){return t.width+50}))),y2:N,stroke:"white",strokeWidth:".3"}),Object(j.jsx)("line",{x1:50,y1:A,x2:50,y2:N,stroke:"white",strokeWidth:".3"})]})]})})]})},b=n(72),p=n(32),f=n.n(p),v=n(268),O=n(269),x=function(t){var e=t.access_token,n=t.setSongsDetails,i=t.setTrackAttribute,c=t.trackAttribute,s=t.setSelectedPlaylist,r=t.selectedPlaylist,l=Object(a.useState)("No Playlists Found"),h=Object(o.a)(l,2),p=h[0],x=h[1],m=Object(a.useState)(null),y=Object(o.a)(m,2),g=y[0],F=y[1];Object(a.useEffect)((function(){var t={Authorization:"Bearer "+e};f.a.get("https://api.spotify.com/v1/me/playlists?limit=50",{headers:t}).then((function(t){var e,n;x(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.map((function(t){return{label:t.name,data:t}})))}),(function(t){console.log(t)}))}),[e]),Object(a.useEffect)((function(){if("undefined"!==typeof r){var t={Authorization:"Bearer "+e};f.a.get("https://api.spotify.com/v1/playlists/".concat(null===r||void 0===r?void 0:r.id,"/tracks"),{headers:t}).then((function(t){var e;F(t),null===g||void 0===g||null===(e=g.items)||void 0===e||e.map((function(t){return t}))}),(function(t){console.log("this error",r,t)}))}else console.log("no playlist selected"),n(null),F(null)}),[r,e,null===g||void 0===g?void 0:g.items,n]),Object(a.useEffect)((function(){if(g&&"undefined"!==typeof r){var t,a,i=null===g||void 0===g||null===(t=g.data)||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map((function(t){var n={Authorization:"Bearer "+e};return f.a.get("https://api.spotify.com/v1/audio-features/".concat(t.track.id),{headers:n}).then((function(e){var n=null===e||void 0===e?void 0:e.data;return n.name=t.track.name,n.popularity=t.track.popularity,n}),(function(t){return console.log(t),t}))}));Promise.all(i).then((function(t){n(t)}))}else n(null)}),[r,e,g,n]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"inputs-flex",children:[Object(j.jsx)(v.a,{disablePortal:!0,id:"combo-box",options:p,sx:{width:300},onChange:function(t,e){return s(null===e||void 0===e?void 0:e.data)},isOptionEqualToValue:function(t,e){return t.id===e.id},renderInput:function(t){return Object(j.jsx)(O.a,Object(b.a)(Object(b.a)({},t),{},{label:"Playlist"}))}}),Object(j.jsxs)(u.a,{color:"primary",value:c,exclusive:!0,onChange:function(t,e){i(e)},children:[Object(j.jsx)(d.a,{color:"secondary",value:"danceability",children:"danceability"}),Object(j.jsx)(d.a,{value:"energy",children:"energy"}),Object(j.jsx)(d.a,{value:"key",children:"key"}),Object(j.jsx)(d.a,{value:"speechiness",children:"speechiness"}),Object(j.jsx)(d.a,{value:"tempo",children:"tempo"})]})]})})},m=function(t){var e=t.playlist,n=t.access_token,i=t.songIdOrder,c=Object(a.useState)(null),s=Object(o.a)(c,2),r=s[0],l=s[1],d=Object(a.useState)(null),u=Object(o.a)(d,2),h=u[0],b=u[1];Object(a.useEffect)((function(){var t={Authorization:"Bearer "+n};f.a.get("https://api.spotify.com/v1/me/",{headers:t}).then((function(t){console.log(t.data.id),l(t)}),(function(t){console.log(t)}))}),[n]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{id:"playlistInterface",children:[Object(j.jsx)(O.a,{id:"outlined-basic",label:"Playlist Name",variant:"outlined",onChange:function(t){return e=t.target.value,void b(e);var e},value:h}),Object(j.jsx)("div",{className:"sp-button sp-flat sp-light",onClick:function(){return function(t,e,n,a){var i={Authorization:"Bearer "+t},c={name:n,description:"Playlist Sorted with Jamsort",public:!0};f()({method:"post",url:"https://api.spotify.com/v1/users/".concat(e.data.id,"/playlists"),headers:i,data:c}).then((function(e){var n={Authorization:"Bearer "+t};f()({method:"post",url:"https://api.spotify.com/v1/playlists/".concat(e.data.id,"/tracks"),headers:n,data:{uris:a}})}),(function(t){console.log(t)}))}(n,r,h,i)},children:"Save as new Playlist"}),Object(j.jsxs)("div",{className:"sp-button sp-flat sp-light",onClick:function(){return function(t,e,n,a){var i={Authorization:"Bearer "+t};f()({method:"put",url:"https://api.spotify.com/v1/playlists/".concat(n,"/tracks"),headers:i,data:{uris:a}}).then((function(t){console.log(t)}))}(n,0,e.id,i)},children:["Overwrite ",e?e.name:" "," Playlist"]})]})})},y=function(t){var e=window.location.hash,n=e.substring(14,e.indexOf("&token_type")),c=Object(a.useState)(null),s=Object(o.a)(c,2),r=s[0],l=s[1],d=i.a.useState("tempo"),u=Object(o.a)(d,2),b=u[0],p=u[1],f=Object(a.useState)(null),v=Object(o.a)(f,2),O=v[0],y=v[1],g=Object(a.useState)(null),F=Object(o.a)(g,2),k=F[0],S=F[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(x,{className:"card",access_token:n,setSongsDetails:l,trackAttribute:b,setTrackAttribute:p,setSelectedPlaylist:y,selectedPlaylist:O}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"song-chart-frame",children:[Object(j.jsx)(m,{playlist:O,access_token:n,songIdOrder:k}),Object(j.jsx)(h,{data:r,trackAttribute:b,setSongIdOrder:S})]})]})},g=function(t){var e="cbb4da0e74d849cf94ec037fdf03ff26",n="".concat(window.location.href,"/index");return Object(a.useEffect)((function(){window.location.href="https://accounts.spotify.com/authorize?client_id=".concat(e,"&scope=").concat(encodeURIComponent("playlist-modify-private playlist-read-private playlist-modify-public"),"&redirect_uri=").concat(n,"&response_type=token&state=123")}),[e,n]),Object(j.jsx)("div",{})},F=n(99),k=n(15),S=function(t){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("h2",{children:"Jam Sort"})}),Object(j.jsx)("body",{children:Object(j.jsx)(F.a,{children:Object(j.jsxs)(k.c,{children:[Object(j.jsx)(k.a,{path:"/spotify-api-react-app/",exact:!0,component:g}),Object(j.jsx)(k.a,{path:"/spotify-api-react-app/index",exact:!0,component:y})]})})})]})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,275)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),c(t),s(t)}))},A=n(101),N=n(271),P=Object(A.a)({palette:{mode:"dark",primary:{main:"#FFFFFF",light:"#FFFFF",dark:"#FF0000",backgroundColor:"#FFFFFF",contrastText:"#FFFFFF"},secondary:{light:"#b3b3b3",main:"#b3b3b3",dark:"#181818",contrastText:"#FFFFFF"},contrastThreshold:3,tonalOffset:.2}});s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(N.a,{theme:P,children:Object(j.jsx)(S,{})})}),document.getElementById("root")),w()}},[[223,1,2]]]);
//# sourceMappingURL=main.b119536d.chunk.js.map