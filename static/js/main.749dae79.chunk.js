(this["webpackJsonpspotify-api-react-app"]=this["webpackJsonpspotify-api-react-app"]||[]).push([[0],{193:function(e,t,n){},194:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),c=n(34),o=n.n(c),r=(n(193),n(194),n(9)),s=n(16),l=n(60),u=n(273),d=n(272),j=n(2),h=function(e){var t=e.data,n=e.trackAttribute,a=Object(i.useState)(null),c=Object(r.a)(a,2),o=c[0],h=c[1],b=Object(i.useState)(null),f=Object(r.a)(b,2),x=f[0],p=f[1],v=Object(i.useState)("None"),O=Object(r.a)(v,2),m=O[0],F=O[1],y=Object(i.useState)({max:0,min:0,avg:0}),g=Object(r.a)(y,2),k=g[0],w=g[1],A=40,S=t?35*(null===t||void 0===t?void 0:t.length)+A:0;Object(i.useEffect)((function(){null!==t&&w({max:Math.max.apply(Math,null===t||void 0===t?void 0:t.map((function(e){return e[n]}))),min:Math.min.apply(Math,null===t||void 0===t?void 0:t.map((function(e){return e[n]}))),avg:(null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t[n]}),0))/(null===t||void 0===t?void 0:t.length)})}),[t,n]),Object(i.useEffect)((function(){if(null!==t)switch(m){case"Ascending":h(Object(s.a)(t).sort((function(e,t){return t[n]-e[n]})));break;case"Descending":h(Object(s.a)(t).sort((function(e,t){return e[n]-t[n]})));break;case"Peak":var e=Object(s.a)(t).sort((function(e,t){return t[n]-e[n]})),i=e.filter((function(e,t){return t%2===0})),a=e.filter((function(e,t){return t%2!==0})),c=i.sort((function(e,t){return e[n]-t[n]})),o=a.sort((function(e,t){return t[n]-e[n]}));h(c.concat(o));break;case"None":default:h(t)}else p(null)}),[m,n,t]),Object(i.useEffect)((function(){if("undefined"!==typeof o){var e=l.b().domain(l.a(null===t||void 0===t?void 0:t.length)).range([0,S-A]).padding(.05),i=l.c().domain([0,k.max]).range([0,100]),a=null===o||void 0===o?void 0:o.map((function(t){return{trackName:null===t||void 0===t?void 0:t.name,x:50,y:e(null===o||void 0===o?void 0:o.indexOf(t)),width:i(t[n]),height:30}}));p(a)}}),[t,S,n,k,m,o]);return Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("div",{className:"sort-controls",children:Object(j.jsxs)(d.a,{color:"primary",value:m,exclusive:!0,onChange:function(e,t){F(t)},children:[Object(j.jsx)(u.a,{value:"None",children:"None"}),Object(j.jsx)(u.a,{value:"Ascending",children:"Ascending"}),Object(j.jsx)(u.a,{value:"Descending",children:"Descending"}),Object(j.jsx)(u.a,{value:"Peak",children:"Peak"})]})}),Object(j.jsx)("div",{className:"playlist-stats card",children:t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h3",{children:["Min ",n,": ",k.min.toFixed(2)]}),Object(j.jsxs)("h3",{children:["Max ",n,": ",k.max.toFixed(2)]}),Object(j.jsxs)("h3",{children:["Average ",n,": ",k.avg.toFixed(2)]})]})}),Object(j.jsx)("div",{id:"chart",children:Object(j.jsxs)("svg",{id:"songChart",height:S,width:800,children:[Object(j.jsx)("text",{x:50,y:15,style:{fill:"#FFFFFF"},children:n}),Object(j.jsx)("text",{x:x?Math.max.apply(Math,x.map((function(e){return e.width+50})))+8:20,y:15,style:{fill:"#FFFFFF"},children:"Songs"}),Object(j.jsx)("line",{x1:0,x2:800,y1:25,y2:25,stroke:"white",strokeWidth:".1"}),t&&(null===x||void 0===x?void 0:x.map((function(e){return Object(j.jsxs)("g",{children:[Object(j.jsxs)("text",{x:e.x+110,y:e.y+15+A,style:{fill:"#FFFFFF"},children:[null===e||void 0===e?void 0:e.trackName," "]}),Object(j.jsx)("rect",{x:e.x,y:e.y+A,width:e.width,height:e.height,style:{fill:"#1DB954",rx:"4px"}})]},e.y)}))),t&&Object(j.jsxs)("g",{children:[Object(j.jsx)("line",{x1:Math.max.apply(Math,x.map((function(e){return e.width+50}))),y1:A,x2:Math.max.apply(Math,x.map((function(e){return e.width+50}))),y2:S,stroke:"white",strokeWidth:".3"}),Object(j.jsx)("line",{x1:50,y1:A,x2:50,y2:S,stroke:"white",strokeWidth:".3"})]})]})})]})},b=n(72),f=n(59),x=n.n(f),p=n(268),v=n(269),O=function(e){var t=e.access_token,n=e.setSongsDetails,a=e.setTrackAttribute,c=e.trackAttribute,o=Object(i.useState)("No Playlists Found"),s=Object(r.a)(o,2),l=s[0],h=s[1],f=Object(i.useState)(null),O=Object(r.a)(f,2),m=O[0],F=O[1],y=Object(i.useState)(null),g=Object(r.a)(y,2),k=g[0],w=g[1];Object(i.useEffect)((function(){var e={Authorization:"Bearer "+t};x.a.get("https://api.spotify.com/v1/me/playlists?limit=50",{headers:e}).then((function(e){var t,n;h(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.map((function(e){return{label:e.name,data:e}})))}),(function(e){console.log(e)}))}),[t]),Object(i.useEffect)((function(){if("undefined"!==typeof m){var e={Authorization:"Bearer "+t};x.a.get("https://api.spotify.com/v1/playlists/".concat(null===m||void 0===m?void 0:m.id,"/tracks"),{headers:e}).then((function(e){var t;w(e),null===k||void 0===k||null===(t=k.items)||void 0===t||t.map((function(e){return e}))}),(function(e){console.log("this error",m,e)}))}else console.log("no playlist selected"),n(null),w(null)}),[m,t,null===k||void 0===k?void 0:k.items,n]),Object(i.useEffect)((function(){if(k&&"undefined"!==typeof m){var e,i,a=null===k||void 0===k||null===(e=k.data)||void 0===e||null===(i=e.items)||void 0===i?void 0:i.map((function(e){var n={Authorization:"Bearer "+t};return x.a.get("https://api.spotify.com/v1/audio-features/".concat(e.track.id),{headers:n}).then((function(t){var n=null===t||void 0===t?void 0:t.data;return n.name=e.track.name,n.popularity=e.track.popularity,n}),(function(e){return console.log(e),e}))}));Promise.all(a).then((function(e){n(e)}))}else n(null)}),[m,t,k,n]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"inputs-flex",children:[Object(j.jsxs)(d.a,{color:"primary",value:c,exclusive:!0,onChange:function(e,t){a(t)},children:[Object(j.jsx)(u.a,{color:"secondary",value:"danceability",children:"danceability"}),Object(j.jsx)(u.a,{value:"energy",children:"energy"}),Object(j.jsx)(u.a,{value:"key",children:"key"}),Object(j.jsx)(u.a,{value:"speechiness",children:"speechiness"}),Object(j.jsx)(u.a,{value:"tempo",children:"tempo"})]}),Object(j.jsx)(p.a,{disablePortal:!0,id:"combo-box",options:l,sx:{width:300},onChange:function(e,t){return F(null===t||void 0===t?void 0:t.data)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(j.jsx)(v.a,Object(b.a)(Object(b.a)({},e),{},{label:"Playlist"}))}})]})})},m=function(e){var t=window.location.hash,n=t.substring(14,t.indexOf("&token_type")),c=Object(i.useState)(null),o=Object(r.a)(c,2),s=o[0],l=o[1],u=a.a.useState("tempo"),d=Object(r.a)(u,2),b=d[0],f=d[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{className:"card",access_token:n,setSongsDetails:l,trackAttribute:b,setTrackAttribute:f}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"song-chart-frame",children:Object(j.jsx)(h,{data:s,trackAttribute:b})})]})},F=function(e){var t="cbb4da0e74d849cf94ec037fdf03ff26",n=window.location.href,a="".concat(n,"home");return Object(i.useEffect)((function(){window.location.href="https://accounts.spotify.com/authorize?client_id=".concat(t,"&redirect_uri=").concat(a,"&response_type=token&state=123")}),[t,a]),Object(j.jsx)("div",{})},y=n(99),g=n(15),k=function(e){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header",children:"Jam Sort"}),Object(j.jsx)(y.a,{children:Object(j.jsxs)(g.c,{children:[Object(j.jsx)(g.a,{path:"/spotify-api-react-app",exact:!0,component:F}),Object(j.jsx)(g.a,{path:"/spotify-api-react-app/index",exact:!0,component:m})]})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,275)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))},A=n(101),S=n(271),N=Object(A.a)({palette:{mode:"dark",primary:{main:"#FFFFFF",light:"#FFFFF",dark:"#FF0000",backgroundColor:"#FFFFFF",contrastText:"#FFFFFF"},secondary:{light:"#b3b3b3",main:"#b3b3b3",dark:"#181818",contrastText:"#FFFFFF"},contrastThreshold:3,tonalOffset:.2}});o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(S.a,{theme:N,children:Object(j.jsx)(k,{})})}),document.getElementById("root")),w()}},[[222,1,2]]]);
//# sourceMappingURL=main.749dae79.chunk.js.map