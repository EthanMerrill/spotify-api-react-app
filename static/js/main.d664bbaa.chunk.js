(this["webpackJsonpspotify-api-react-app"]=this["webpackJsonpspotify-api-react-app"]||[]).push([[0],{194:function(t,e,n){},195:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(35),o=n.n(c),s=(n(194),n(195),n(9)),r=n(16),l=n(60),d=n(273),u=n(272),h=n(2),j=function(t){var e=t.data,n=t.trackAttribute,i=t.setSongIdOrder,c=Object(a.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],f=Object(a.useState)(null),p=Object(s.a)(f,2),v=p[0],O=p[1],x=Object(a.useState)("None"),m=Object(s.a)(x,2),y=m[0],g=m[1],F=Object(a.useState)({max:0,min:0,avg:0}),k=Object(s.a)(F,2),w=k[0],S=k[1],N=40,A=e?35*(null===e||void 0===e?void 0:e.length)+N:0;Object(a.useEffect)((function(){null!==e&&S({max:Math.max.apply(Math,null===e||void 0===e?void 0:e.map((function(t){return t[n]}))),min:Math.min.apply(Math,null===e||void 0===e?void 0:e.map((function(t){return t[n]}))),avg:(null===e||void 0===e?void 0:e.reduce((function(t,e){return t+e[n]}),0))/(null===e||void 0===e?void 0:e.length)})}),[e,n]),Object(a.useEffect)((function(){if(e)switch(console.log(e,typeof e),y){case"Descending":b(Object(r.a)(e).sort((function(t,e){return e[n]-t[n]})));break;case"Ascending":b(Object(r.a)(e).sort((function(t,e){return t[n]-e[n]})));break;case"Peak":var t=Object(r.a)(e).sort((function(t,e){return e[n]-t[n]})),a=t.filter((function(t,e){return e%2===0})),i=t.filter((function(t,e){return e%2!==0})),c=a.sort((function(t,e){return t[n]-e[n]})),o=i.sort((function(t,e){return e[n]-t[n]}));b(c.concat(o));break;case"None":default:b(e)}else O(null)}),[y,n,e]),Object(a.useEffect)((function(){if("undefined"!==typeof j){console.log(j);var t=l.b().domain(l.a(null===e||void 0===e?void 0:e.length)).range([0,A-N]).padding(.05),a=l.c().domain([0,w.max]).range([0,100]);i(null===j||void 0===j?void 0:j.map((function(t){return"spotify:track:".concat(null===t||void 0===t?void 0:t.id)})));var c=null===j||void 0===j?void 0:j.map((function(e){var i;return{trackName:null===e||void 0===e||null===(i=e.track)||void 0===i?void 0:i.name,x:50,y:t(null===j||void 0===j?void 0:j.indexOf(e)),width:a(e[n]),height:30}}));O(c)}}),[e,A,n,w,y,j,i]);return Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsxs)("div",{className:"sort-controls",children:[Object(h.jsx)("h3",{children:"Sort Method  "}),Object(h.jsxs)(u.a,{color:"primary",value:y,exclusive:!0,onChange:function(t,e){g(e)},children:[Object(h.jsx)(d.a,{value:"None",children:"None"}),Object(h.jsx)(d.a,{value:"Ascending",children:"Ascending"}),Object(h.jsx)(d.a,{value:"Descending",children:"Descending"}),Object(h.jsx)(d.a,{value:"Peak",children:"Peak"})]})]}),Object(h.jsx)("div",{className:"playlist-stats card",children:e&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h3",{children:["Min ",n,": ",w.min.toFixed(2)]}),Object(h.jsxs)("h3",{children:["Max ",n,": ",w.max.toFixed(2)]}),Object(h.jsxs)("h3",{children:["Average ",n,": ",w.avg.toFixed(2)]})]})}),Object(h.jsx)("div",{id:"chart",children:Object(h.jsxs)("svg",{id:"songChart",height:A,width:800,children:[Object(h.jsx)("text",{x:50,y:15,style:{fill:"#FFFFFF"},children:n}),Object(h.jsx)("text",{x:v?Math.max.apply(Math,v.map((function(t){return t.width+50})))+8:20,y:15,style:{fill:"#FFFFFF"},children:"Songs"}),Object(h.jsx)("line",{x1:0,x2:800,y1:25,y2:25,stroke:"white",strokeWidth:".1"}),e&&v&&(null===v||void 0===v?void 0:v.map((function(t){return Object(h.jsxs)("g",{children:[Object(h.jsxs)("text",{x:t.x+110,y:t.y+20+N,style:{fill:"#FFFFFF"},children:[null===t||void 0===t?void 0:t.trackName," "]}),Object(h.jsx)("rect",{x:t.x,y:t.y+N,width:t.width,height:t.height,style:{fill:"#1DB954",rx:"4px"}})]},t.y)}))),e&&v&&Object(h.jsxs)("g",{children:[Object(h.jsx)("line",{x1:Math.max.apply(Math,v.map((function(t){return t.width+50}))),y1:N,x2:Math.max.apply(Math,v.map((function(t){return t.width+50}))),y2:A,stroke:"white",strokeWidth:".3"}),Object(h.jsx)("line",{x1:50,y1:N,x2:50,y2:A,stroke:"white",strokeWidth:".3"})]})]})})]})},b=n(72),f=n(32),p=n.n(f),v=n(268),O=n(269),x=function(t){var e=t.access_token,n=t.setSongsDetails,i=t.setTrackAttribute,c=t.trackAttribute,o=t.setSelectedPlaylist,r=t.selectedPlaylist,l=Object(a.useState)(["No Playlists Found"]),j=Object(s.a)(l,2),f=j[0],x=j[1],m=Object(a.useState)(null),y=Object(s.a)(m,2),g=y[0],F=y[1];Object(a.useEffect)((function(){var t={Authorization:"Bearer "+e};p.a.get("https://api.spotify.com/v1/me/playlists?limit=50",{headers:t}).then((function(t){var e,n;x(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.map((function(t){return{label:t.name,data:t}})))}),(function(t){console.log(t)}))}),[e]),Object(a.useEffect)((function(){if("undefined"!==typeof r){var t={Authorization:"Bearer "+e};p.a.get("https://api.spotify.com/v1/playlists/".concat(null===r||void 0===r?void 0:r.id,"/tracks"),{headers:t}).then((function(t){var e;F(t),null===g||void 0===g||null===(e=g.items)||void 0===e||e.map((function(t){return t}))}),(function(t){console.log("this error",r,t)}))}else console.log("no playlist selected"),n(null),F(null)}),[r,e,null===g||void 0===g?void 0:g.items,n]),Object(a.useEffect)((function(){n(g&&"undefined"!==typeof r?function(t){var a,i,c={Authorization:"Bearer "+e},o=null===t||void 0===t||null===(a=t.data)||void 0===a||null===(i=a.items)||void 0===i?void 0:i.map((function(t){return t.track.id})),s=p()({method:"GET",url:"https://api.spotify.com/v1/audio-features/?ids=".concat(String(o)),headers:c}).then((function(e){return t.data.items.map((function(t){return Object.assign(t,e.data.audio_features.find((function(e){var n;return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t||null===(n=t.track)||void 0===n?void 0:n.id)})))}))}),(function(t){return console.log(t),alert(t),t}));Promise.resolve(s).then((function(t){n(t)}))}(g):null)}),[r,e,g,n]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"inputs-flex",children:[Object(h.jsx)("div",{className:"autocomplete-container",children:Object(h.jsx)(v.a,{disablePortal:!0,id:"combo-box",options:f,sx:{width:300},onChange:function(t,e){return o(null===e||void 0===e?void 0:e.data)},isOptionEqualToValue:function(t,e){return t.id===e.id},renderInput:function(t){return Object(h.jsx)(O.a,Object(b.a)(Object(b.a)({},t),{},{label:"Playlist"}))}})}),Object(h.jsxs)("div",{className:"mini-box",children:[Object(h.jsx)("h3",{children:" Sort Metric"}),Object(h.jsxs)(u.a,{color:"primary",value:c,exclusive:!0,onChange:function(t,e){i(e)},children:[Object(h.jsx)(d.a,{value:"danceability",children:"danceability"}),Object(h.jsx)(d.a,{value:"energy",children:"energy"}),Object(h.jsx)(d.a,{value:"key",children:"key"}),Object(h.jsx)(d.a,{value:"speechiness",children:"speechiness"}),Object(h.jsx)(d.a,{value:"tempo",children:"tempo"})]})]})]})})},m=function(t){var e=t.playlist,n=t.access_token,i=t.songIdOrder,c=Object(a.useState)(null),o=Object(s.a)(c,2),r=o[0],l=o[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var t={Authorization:"Bearer "+n};p.a.get("https://api.spotify.com/v1/me/",{headers:t}).then((function(t){l(t)}),(function(t){console.log(t)}))}),[n]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{id:"playlistInterface",children:[Object(h.jsx)(O.a,{id:"outlined-basic",label:"Playlist Name",variant:"outlined",onChange:function(t){return e=t.target.value,void b(e);var e},value:j}),Object(h.jsx)("div",{className:"sp-button sp-flat sp-light",onClick:function(){return function(t,e,n,a){var i={Authorization:"Bearer "+t},c={name:n,description:"Playlist Sorted with Jamsort",public:!0};p()({method:"post",url:"https://api.spotify.com/v1/users/".concat(e.data.id,"/playlists"),headers:i,data:c}).then((function(e){var n={Authorization:"Bearer "+t};p()({method:"post",url:"https://api.spotify.com/v1/playlists/".concat(e.data.id,"/tracks"),headers:n,data:{uris:a}}).then((function(t){201===t.status?alert("Playlist Saved as: ".concat(c.name)):alert("error: ".concat(t.status,", ").concat(t.statusText)),console.log(t)}))}),(function(t){console.log(t)}))}(n,r,j,i)},children:"Save as new Playlist"}),Object(h.jsxs)("div",{className:"sp-button sp-flat sp-light",onClick:function(){return function(t,e,n,a){var i={Authorization:"Bearer "+t};p()({method:"put",url:"https://api.spotify.com/v1/playlists/".concat(n,"/tracks"),headers:i,data:{uris:a}}).then((function(t){201===t.status?alert("Playlist Overwritten!"):alert("error: ".concat(t.status,", ").concat(t.statusText)),console.log(t)}))}(n,0,e.id,i)},children:["Overwrite ",e?e.name:" "," Playlist"]})]})})},y=function(t){var e=window.location.hash,n=e.substring(14,e.indexOf("&token_type")),c=Object(a.useState)(null),o=Object(s.a)(c,2),r=o[0],l=o[1],d=i.a.useState("tempo"),u=Object(s.a)(d,2),b=u[0],f=u[1],p=Object(a.useState)(null),v=Object(s.a)(p,2),O=v[0],y=v[1],g=Object(a.useState)(null),F=Object(s.a)(g,2),k=F[0],w=F[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{className:"card",access_token:n,setSongsDetails:l,trackAttribute:b,setTrackAttribute:f,setSelectedPlaylist:y,selectedPlaylist:O}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"song-chart-frame",children:[Object(h.jsx)(m,{playlist:O,access_token:n,songIdOrder:k}),Object(h.jsx)(j,{data:r,trackAttribute:b,setSongIdOrder:w})]})]})},g=function(t){var e="cbb4da0e74d849cf94ec037fdf03ff26",n="";console.log(n),n="/"===String(window.location.href)[String(window.location.href).length-1]?"".concat(window.location.href,"index"):"".concat(window.location.href,"/index"),console.log(n);return Object(a.useEffect)((function(){window.location.href="https://accounts.spotify.com/authorize?client_id=".concat(e,"&scope=").concat(encodeURIComponent("playlist-modify-private playlist-read-private playlist-modify-public"),"&redirect_uri=").concat(n,"&response_type=token&state=123")}),[e,n]),Object(h.jsx)("div",{})},F=n(99),k=n(15),w=function(t){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{className:"App-header",children:Object(h.jsx)("h2",{children:"Jam Sort"})}),Object(h.jsx)("div",{className:"body",children:Object(h.jsx)(F.a,{children:Object(h.jsxs)(k.c,{children:[Object(h.jsx)(k.a,{path:"/spotify-api-react-app/",exact:!0,component:g}),Object(h.jsx)(k.a,{path:"/spotify-api-react-app/index",exact:!0,component:y})]})})})]})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,275)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),c(t),o(t)}))},N=n(101),A=n(271),P=Object(N.a)({palette:{mode:"dark",primary:{main:"#FFFFFF",light:"#FFFFF",dark:"#FF0000",backgroundColor:"#FFFFFF",contrastText:"#FFFFFF"},secondary:{light:"#b3b3b3",main:"#b3b3b3",dark:"#181818",contrastText:"#FFFFFF"},contrastThreshold:3,tonalOffset:.2}});o.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(A.a,{theme:P,children:Object(h.jsx)(w,{})})}),document.getElementById("root")),S()}},[[223,1,2]]]);
//# sourceMappingURL=main.d664bbaa.chunk.js.map